# **오늘 공부한 내용: Django 클래스 기반 뷰 (Class-Based Views, CBV)**

---

Django에서 뷰(View)는 HTTP 요청을 처리하고 응답을 반환하는 역할을 합니다. Django는 기본적으로 함수 기반 뷰(Function-Based Views, FBV)를 제공하지만, 더 효율적이고 재사용 가능한 코드를 작성하기 위해 **클래스 기반 뷰(Class-Based Views, CBV)**를 사용할 수 있습니다.

### **1. 클래스 기반 뷰란?**

클래스 기반 뷰는 Python 클래스 형태로 작성된 뷰입니다.

### **FBV와 CBV의 차이점**

| **FBV (함수 기반 뷰)** | **CBV (클래스 기반 뷰)** |
| --- | --- |
| 하나의 함수로 요청을 처리 | 클래스를 사용하여 요청 메서드(GET, POST 등)를 분리 |
| 코드가 간결하지만 복잡한 로직에서 불리 | 구조적이고 코드 재사용성이 높음 |

CBV의 주요 장점:

- **코드 재사용성**: 공통 로직을 상속받아 여러 뷰에서 활용 가능
- **구조적 설계**: HTTP 요청 메서드(GET, POST 등)를 명확히 분리하여 유지보수 용이

---

### **2. CBV 기본 구조**

### 2.1. View 클래스의 기본 형태

Django에서 CBV는 `django.views` 모듈의 `View` 클래스를 상속받아 구현합니다.

### **기본 예제:**

```python
from django.http import HttpResponse
from django.views import View

class MyView(View):
    def get(self, request):
        return HttpResponse('GET 요청에 대한 응답입니다.')

    def post(self, request):
        return HttpResponse('POST 요청에 대한 응답입니다.')

```

### **주요 메서드:**

- **`get(self, request, *args, **kwargs)`**: GET 요청을 처리
- **`post(self, request, *args, **kwargs)`**: POST 요청을 처리
- **`put(self, request, *args, **kwargs)`**: PUT 요청을 처리
- **`delete(self, request, *args, **kwargs)`**: DELETE 요청을 처리

---

### 2.2. APIView (Django REST Framework)

**APIView**는 Django REST Framework에서 제공하는 기본 CBV로, API를 작성할 때 자주 사용됩니다.

### **기본 예제:**

```python
from rest_framework.views import APIView
from rest_framework.response import Response

class MyView(APIView):
    def get(self, request):
        return Response({'message': 'GET 요청에 대한 응답입니다.'})

    def post(self, request):
        return Response({'message': 'POST 요청에 대한 응답입니다.'})

```

---

### **3. CBV를 URL에 연결하기**

CBV를 URL에 연결하려면 클래스 자체를 호출하는 것이 아니라 `.as_view()` 메서드를 사용해야 합니다. 이 메서드는 클래스를 호출 가능한 객체로 변환합니다.

### **예제:**

```python
from django.urls import path
from .views import MyView

urlpatterns = [
    path('myview/', MyView.as_view(), name='myview'),
]

```

---

### **4. CBV의 동작 흐름**

CBV는 내부적으로 `dispatch()` 메서드를 사용하여 HTTP 요청 메서드(GET, POST 등)에 따라 적절한 메서드(get, post 등)를 호출합니다.

### **CBV 동작 시각화:**

```
클라이언트 요청 (GET, POST 등)
        ↓
CBV의 dispatch() 호출
        ↓
해당 요청 메서드의 핸들러 실행 (get(), post(), 등)
        ↓
응답 반환

```

---

### **5. CBV 활용 팁**

- **Mixin 활용**: Django는 CBV 기능 확장을 위해 다양한 Mixin을 제공합니다. 예를 들어, `TemplateView`, `ListView`, `DetailView` 등은 미리 정의된 기능을 제공하여 코드 작성을 단순화합니다.
- **코드 재사용 극대화**: 공통 로직을 부모 클래스에 작성하여 자식 클래스에서 재사용합니다.